:ref_current: https://www.elastic.co/guide/en/elasticsearch/reference/2.3

:github: https://github.com/elastic/elasticsearch-net

:nuget: https://www.nuget.org/packages

[[child-aggregation-mapping]]
== Child Aggregation Mapping 

To use the {ref_current}/search-aggregations-bucket-children-aggregation.html[Children Aggregation],
you have to make sure a `_parent` mapping is in place.

Here we create the project index with two mapped types, `Project` and `CommitActivity` and
add a `_parent` mapping to `CommitActivity`, specifying the `Project` type as the parent 

[source,csharp]
----
var createProjectIndex = TestClient.GetClient().CreateIndex(typeof(Project), c => c
    .Mappings(map => map
        .Map<Project>(tm => tm.AutoMap())
        .Map<CommitActivity>(tm => tm
            .Parent<Project>() <1>
        )
    )
);
----
<1> Set the parent of `CommitActivity` to the `Project` type

